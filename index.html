<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flex Controle - Sistema de Gerenciamento de Coletas</title>

    <link rel="stylesheet" href="flex.css">
</head>
<body>
    <!-- Adicionado container de notificações para popups -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Cabeçalho -->
    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-icon icon-truck"></div>
                <div class="header-text">
                    <h1>Flex Controle</h1>
                    <p>Sistema de gerenciamento de coletas e entregas</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container" style="padding-top: 2rem;">
    <!-- Card do formulário -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <span class="icon-package"></span>
                    Novo Registro
                </div>
            </div>
            <div class="card-content">
                <form id="recordForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="data">
                                <span class="icon-calendar"></span>
                                Data
                            </label>
                            <input type="date" id="data" name="data" required>
                        </div>

                        <div class="form-group">
                            <label for="loja">Loja</label>
                            <select id="loja" name="loja" required>
                                <option value="">Selecione uma loja</option>
                                <option value="Shopee Adob">Shopee Adob</option>
                                <option value="Shopee APPB">Shopee APPB</option>
                                <option value="Shopee Buscou Pneus">Shopee Buscou Pneus</option>
                                <option value="Shopee Meta">Shopee Meta</option>
                                <option value="Shopee Natal">Shopee Natal</option>
                                <option value="Shopee RLD">Shopee RLD</option>
                                <option value="Shopee Rubão">Shopee Rubão</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="pedido">Pedido (ID)</label>
                            <input type="text" id="pedido" name="pedido" placeholder="Digite o ID do pedido" required>
                        </div>

                        <div class="form-group">
                            <label for="nota">Nota</label>
                            <input type="text" id="nota" name="nota" placeholder="Número da nota">
                        </div>

                        <div class="form-group">
                            <label for="valor_produto">
                                <span class="icon-dollar"></span>
                                Valor do Produto (R$)
                            </label>
                            <input type="number" id="valor_produto" name="valor_produto" step="0.01" min="0" placeholder="0,00">
                        </div>

                        <div class="form-group">
                            <label for="estorno_merc">Estorno Merc.</label>
                            <select id="estorno_merc" name="estorno_merc">
                                <option value="0">Não</option>
                                <option value="1">Sim</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="estorno_frete">
                                <span class="icon-dollar"></span>
                                Estorno Frete (R$)
                            </label>
                            <input type="number" id="estorno_frete" name="estorno_frete" step="0.01" min="0" placeholder="0,00">
                        </div>

                        <div class="form-group">
                            <label for="status_pedido">Status do Pedido</label>
                            <select id="status_pedido" name="status_pedido">
                                <option value="A COLETAR">A Coletar</option>
                                <option value="COLETADO">Coletado</option>
                                <option value="CANCELADO">Cancelado</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="situacao">Situação</label>
                            <select id="situacao" name="situacao">
                                <option value="EM ABERTO">Em Aberto</option>
                                <option value="PAGO">Pago</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="obs">Observação</label>
                            <textarea id="obs" name="obs" placeholder="Digite observações adicionais..."></textarea>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary">
                            <span class="icon-save"></span>
                            Salvar Registro
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="clearForm()">
                            Limpar
                        </button>
                    </div>
                </form>
            </div>
        </div>

    <!-- Card de filtros -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <span class="icon-filter"></span>
                    Filtros e Busca
                </div>
            </div>
            <div class="card-content">
                <!-- Pesquisa -->
                <div class="search-section">
                    <label style="color: #171717; font-weight: 600; margin-bottom: 0.5rem;">
                        <span class="icon-search"></span>
                        Pesquisar (Pedido ou Nota)
                    </label>
                    <div class="search-input">
                        <input type="text" id="searchQuery" placeholder="Digite o ID do pedido ou a nota...">
                        <button type="button" class="btn btn-secondary" onclick="clearSearch()">Limpar</button>
                    </div>
                </div>

                <!-- Filtros de data e loja -->
                <div class="filters-grid">
                    <div class="form-group">
                        <label for="f_ini">Data Início</label>
                        <input type="date" id="f_ini">
                    </div>

                    <div class="form-group">
                        <label for="f_fim">Data Fim</label>
                        <input type="date" id="f_fim">
                    </div>

                    <div class="form-group">
                        <label for="f_loja">Loja</label>
                        <select id="f_loja">
                            <option value="todas">(Todas)</option>
                            <option value="Shopee Adob">Shopee Adob</option>
                            <option value="Shopee APPB">Shopee APPB</option>
                            <option value="Shopee Buscou Pneus">Shopee Buscou Pneus</option>
                            <option value="Shopee Meta">Shopee Meta</option>
                            <option value="Shopee Natal">Shopee Natal</option>
                            <option value="Shopee RLD">Shopee RLD</option>
                            <option value="Shopee Rubão">Shopee Rubão</option>
                        </select>
                    </div>
                </div>

                <!-- Botões de ação -->
                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" onclick="exportCSV()">
                        <span class="icon-download"></span>
                        Exportar <strong>Excel</strong>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="clearSelection()">
                        <strong>Limpar Seleção</strong>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="pagarSelecionados()">
                        <span class="icon-check"></span>
                        <strong>Marcar Selecionados como Pago</strong>
                    </button>
                </div>

                <!-- Resumo -->
                <div class="summary-grid">
                    <div class="summary-card total">
                        <div class="summary-number" id="summary-total">0</div>
                        <div class="summary-label">Total de Registros</div>
                    </div>
                    <div class="summary-card success">
                        <div class="summary-number" id="summary-coletados">0</div>
                        <div class="summary-label">Coletados</div>
                    </div>
                    <div class="summary-card warning">
                        <div class="summary-number" id="summary-pendentes">0</div>
                        <div class="summary-label">Pendentes</div>
                    </div>
                    <div class="summary-card primary">
                        <div class="summary-number" id="summary-valor">R$ 0,00</div>
                        <div class="summary-label">Valor Total</div>
                    </div>
                </div>
            </div>
        </div>

    <!-- Card da tabela de dados -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <span class="icon-database"></span>
                    Registros de Produtos
                    <span id="record-count" style="font-size: 0.875rem; color: #6b7280; margin-left: auto;">0 registros</span>
                </div>
            </div>
            <div class="card-content">
                <div class="table-container">
                    <table id="recordsTable">
                        <thead>
                            <tr>
                                <th style="width: 3rem;">
                                    <input type="checkbox" id="selectAll" onchange="handleSelectAll(this.checked)">
                                </th>
                                <th>Data</th>
                                <th>Loja</th>
                                <th>Pedido</th>
                                <th>Nota</th>
                                <th class="text-right">R$ Produto</th>
                                <th class="text-center">Est. Merc.</th>
                                <th class="text-right">Est. Frete</th>
                                <th class="text-right">R$ a Pagar</th>
                                <th class="text-center">Status</th>
                                <th class="text-center">Situação</th>
                                <th>Observação</th>
                                <th class="text-center">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="recordsTableBody">
                                <!-- Registros serão inseridos aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

          <div class="btn-group" style="margin-top: .75rem;">
            <button type="button" class="btn btn-primary" id="btnRelatorioGPT">
              Gerar relatório no ChatGPT  
            </button>
            <p style="font-size: 0.75rem; color: #6b7280; margin-left: 1rem; align-self: center; position: relative; left: 180px;">
              (Gerar um relatório resumido dos registros filtrados usando o ChatGPT: Basta Pressionar Control V + Enter No Campo de Texto Do ChatGPT)</p>
          </div>


    <!-- Rodapé -->
    <div class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-icon icon-truck"></div>
                    <div>
                        <div class="footer-text">Coletas Flex</div>
                        <div class="footer-subtitle">Sistema de gerenciamento</div>
                    </div>
                </div>
                <div class="footer-credits">
                    <div>
                        Desenvolvido por 
                        <a href="https://github.com/guubernardi" target="_blank" rel="noreferrer noopener">
                            Gustavo Bernardi
                        </a>
                    </div>
                    <div style="font-size: 0.75rem; color: #9ca3af;">
                        © 2025 Flex Controle. Todos os direitos reservados.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="flex.js"></script>
</body>
</html>
